<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Applwprj</title>
<style>
body{margin:0;background:#050913;color:#fff;font-family:'Be Vietnam Pro',sans-serif;text-align:center;overflow-x:hidden;}
.card{margin:30px auto;padding:20px;width:min(90%,800px);background:rgba(255,255,255,0.08);border-radius:20px;backdrop-filter:blur(8px);}
.theme-text{background:linear-gradient(90deg,var(--grad1,#ff62a5),var(--grad2,#57ff9a));-webkit-background-clip:text;color:transparent;}
.rainbow-text{background:linear-gradient(90deg,#ff4fa8,#ffd66e,#57ff9a,#57d0ff,#aa7bff,#ff4fa8);background-size:400% 100%;animation:rainbow 4s linear infinite;-webkit-background-clip:text;color:transparent;}
@keyframes rainbow{0%{background-position:0 50%}100%{background-position:100% 50%}}
.btn{background:#1a2035;border:none;border-radius:10px;color:#fff;padding:10px 16px;margin:5px;cursor:pointer;}
.btn:hover{background:#2b3355;}
#bgReact{position:fixed;inset:0;z-index:-1;background:radial-gradient(circle at 20% 20%,hsl(var(--h1,200) 90% 55% / .3),transparent 70%),radial-gradient(circle at 80% 80%,hsl(var(--h2,340) 90% 55% / .3),transparent 70%);transition:background .2s;}
.v-badge{display:inline-grid;place-items:center;width:18px;height:18px;border-radius:50%;background:linear-gradient(135deg,#1fa2ff,#12d8fa 50%,#1d8cf8);animation:tickGlow 2.5s linear infinite;box-shadow:0 0 8px #1fa2ff;}
@keyframes tickGlow{0%{filter:hue-rotate(0deg)}50%{filter:hue-rotate(180deg)}100%{filter:hue-rotate(360deg)}}
.slider{width:200px;}
.iphone{position:relative;width:min(360px,90vw);margin:20px auto;aspect-ratio:9/19.5;border-radius:45px;background:#000;box-shadow:0 20px 60px rgba(0,0,0,.8);overflow:hidden;}
.iphone__screen{position:absolute;inset:10px;border-radius:35px;background:#fff;display:flex;flex-direction:column;overflow:hidden;}
.video-container video{width:100%;height:100%;object-fit:cover;border:none;}
.v-hidden{display:none!important;}
</style>
</head>
<body>
<div id="bgReact"></div>
<div class="card">
  <h1 class="theme-text" id="heroName">ApplwNgoo <span class="v-badge"><svg viewBox='0 0 24 24' width='12' height='12'><path d='M6 12l3.5 3.5L18 7' stroke='white' stroke-width='3' fill='none' stroke-linecap='round' stroke-linejoin='round'/></svg></span></h1>
  <p class="theme-text">Xin chào — mình là <strong>ApplwNgoo</strong></p>
  <div>
    <button class="btn" id="btnPink">Màu hồng</button>
    <button class="btn" id="btnFlash">Nhấp nháy</button>
    <button class="btn" id="btnRandom">Random</button>
    <input type="color" id="colorInput" class="btn" value="#ff62a5">
  </div>
  <div>
    <button class="btn" id="btnMic">Theo nhạc (Mic)</button>
    <button class="btn" id="btnFile">Thêm file nhạc/clip</button>
    <input type="file" id="fileInput" accept="audio/*,video/mp4" hidden>
    <button class="btn" id="btnStop">Dừng</button>
  </div>
  <div>
    <label>Độ nhạy: <input type="range" id="sens" class="slider" min="0.5" max="4" step="0.1" value="1"> <span id="sensVal">1.0</span>x</label>
  </div>
  <p id="hint"></p>
</div>

<!-- iPhone mock -->
<div class="iphone">
  <div class="iphone__screen">
    <div class="video-container v-hidden" id="videoWrap"><video id="videoPlayer" controls></video></div>
  </div>
</div>

<audio id="music" loop></audio>
<script>
let grad1="#ff62a5",grad2="#57ff9a";
const themeEls=[...document.querySelectorAll('.theme-text')];
function setGrad(a,b){grad1=a;grad2=b;document.documentElement.style.setProperty('--grad1',a);document.documentElement.style.setProperty('--grad2',b);}
function randGrad(){const h=Math.random()*360;return[`hsl(${h} 90% 65%)`,`hsl(${(h+120)%360} 90% 65%)`];}
document.getElementById('btnPink').onclick=()=>{setGrad('#ff62a5','#ffb3d1');themeEls.forEach(e=>e.classList.remove('rainbow-text'));}
document.getElementById('btnFlash').onclick=()=>{themeEls.forEach(e=>e.classList.toggle('rainbow-text'));}
document.getElementById('btnRandom').onclick=()=>{const [a,b]=randGrad();setGrad(a,b);themeEls.forEach(e=>e.classList.remove('rainbow-text'));}
document.getElementById('colorInput').oninput=e=>{setGrad(e.target.value,'#fff');themeEls.forEach(e=>e.classList.remove('rainbow-text'));}

let ctx,analyser,src,buf,raf,musicMode=false;
const bg=document.getElementById('bgReact');const hint=document.getElementById('hint');
let sens=1;document.getElementById('sens').oninput=e=>{sens=parseFloat(e.target.value);document.getElementById('sensVal').textContent=sens.toFixed(1);}
function setH(h1,l1,h2,l2){document.documentElement.style.setProperty('--h1',h1);document.documentElement.style.setProperty('--h2',h2);}
function stopAll(){
 if(raf)cancelAnimationFrame(raf);
 if(ctx)ctx.close();
 ctx=null;musicMode=false;
 document.getElementById('music').pause();
 const vid=document.getElementById('videoPlayer');
 vid.pause();vid.classList.add('v-hidden');
 document.getElementById('videoWrap').classList.add('v-hidden');
 hint.textContent="";setH(200,55,340,55);
}
function loopAnalyser(){
 if(!musicMode)return;
 analyser.getByteFrequencyData(buf);
 let sum=0;for(let i=0;i<buf.length;i++)sum+=buf[i];
 const avg=sum/buf.length;const n=Math.min(1,avg/255)*sens;
 const hue1=(performance.now()/50)%360,hue2=(hue1+120)%360;
 const l1=40+Math.min(60,50*n),l2=50+Math.min(50,40*n);
 setH(hue1,l1,hue2,l2);
 setGrad(`hsl(${hue1} 90% ${60+15*n}%)`,`hsl(${hue2} 85% 60%)`);
 raf=requestAnimationFrame(loopAnalyser);
}
function startAnalyser(node,connectOut=false){
 ctx=new (window.AudioContext||window.webkitAudioContext)();
 analyser=ctx.createAnalyser();analyser.fftSize=1024;analyser.smoothingTimeConstant=.85;
 src=node;src.connect(analyser);if(connectOut)analyser.connect(ctx.destination);
 buf=new Uint8Array(analyser.frequencyBinCount);
 musicMode=true;loopAnalyser();
}
document.getElementById('btnMic').onclick=async()=>{
 stopAll();hint.textContent="Đang nghe micro...";
 const stream=await navigator.mediaDevices.getUserMedia({audio:true});
 const c=new (window.AudioContext||window.webkitAudioContext)();
 const node=c.createMediaStreamSource(stream);ctx=c;startAnalyser(node,false);
};
document.getElementById('btnFile').onclick=()=>document.getElementById('fileInput').click();
document.getElementById('fileInput').onchange=e=>{
 const f=e.target.files[0];if(!f)return;
 stopAll();
 const ext=f.name.split('.').pop().toLowerCase();
 if(ext==='mp4'){
   const vid=document.getElementById('videoPlayer');
   vid.src=URL.createObjectURL(f);
   vid.play();vid.muted=false;
   document.getElementById('videoWrap').classList.remove('v-hidden');
   const c=new (window.AudioContext||window.webkitAudioContext)();
   const node=c.createMediaElementSource(vid);
   ctx=c;startAnalyser(node,true);
   hint.textContent="Đang phát video: "+f.name;
 } else {
   const aud=document.getElementById('music');
   aud.src=URL.createObjectURL(f);
   aud.play();
   const c=new (window.AudioContext||window.webkitAudioContext)();
   const node=c.createMediaElementSource(aud);
   ctx=c;startAnalyser(node,true);
   hint.textContent="Đang phát nhạc: "+f.name;
 }
};
document.getElementById('btnStop').onclick=stopAll;
</script>
</body>
</html>


