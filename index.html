<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ApplwNgoo?!?!?</title>
<style>
:root{
  --grad1:#ff62a5;
  --grad2:#57ff9a;
}
body{margin:0;background:#02040a;color:#fff;font-family:'Be Vietnam Pro',sans-serif;text-align:center;overflow-x:hidden;}
.card{margin:20px auto;padding:15px;width:min(90%,800px);background:rgba(255,255,255,.05);border-radius:20px;backdrop-filter:blur(10px);}
.btn{background:#141826;border:none;border-radius:10px;color:#fff;padding:10px 16px;margin:5px;cursor:pointer;font-weight:600;}
.btn:hover{background:#23283d;}
.theme-text{background:linear-gradient(90deg,var(--grad1),var(--grad2));-webkit-background-clip:text;color:transparent;}
.rainbow-text{background:linear-gradient(90deg,#ff4fa8,#ffd66e,#57ff9a,#57d0ff,#aa7bff,#ff4fa8);background-size:400% 100%;animation:rainbow 4s linear infinite;-webkit-background-clip:text;color:transparent;}
.rgb-text{background:linear-gradient(90deg,#ff0000,#00ff00,#0000ff,#ff0000);background-size:400% 100%;animation:rgbShift 3s linear infinite;-webkit-background-clip:text;color:transparent;}
@keyframes rainbow{0%{background-position:0 50%}100%{background-position:100% 50%}}
@keyframes rgbShift{0%{background-position:0 50%}100%{background-position:100% 50%}}
.iphone{position:relative;width:min(360px,92vw);aspect-ratio:9/19.5;border-radius:45px;background:#000;box-shadow:0 20px 60px rgba(0,0,0,.9);overflow:hidden;margin:18px auto;}
.iphone__screen{position:absolute;inset:10px;border-radius:35px;background:#111;display:flex;flex-direction:column;overflow:hidden;}
.island{position:absolute;top:12px;left:50%;transform:translateX(-50%);width:160px;height:36px;background:#000;border-radius:18px;display:flex;align-items:center;justify-content:center;transition:all .35s ease;overflow:hidden;z-index:2;}
.island.expanded{width:88%;height:120px;border-radius:30px;background:#0c0c0c;flex-direction:column;padding:10px;}
.island-expanded{display:none;}
.island.expanded .island-expanded{display:block;}
.island.expanded .island-compact{display:none;}
.datetime{text-align:right;font-size:14px;}
.visualizer{width:90%;height:30px;margin:6px auto 0;display:flex;align-items:end;gap:2px;}
.visualizer div{flex:1;border-radius:2px;height:10px;background:linear-gradient(180deg,var(--grad2),var(--grad1));transition:height .05s linear,background .5s;}
.fb-header{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:#111;border-bottom:1px solid #222;}
.logo-badge{background:#1877f2;color:#fff;font-weight:900;font-size:20px;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;}
.fb-composer{display:flex;align-items:center;gap:10px;padding:10px;border-bottom:1px solid #222;background:#0b0b0b;}
.avatar-sm{width:36px;height:36px;border-radius:50%;object-fit:cover;}
.fb-post{padding:10px;text-align:left;border-bottom:1px solid #222;background:#0c0c0c;}
.post-head{display:flex;align-items:center;gap:8px;}
.post-media{border-radius:12px;background:#000;overflow:hidden;margin-top:8px;}
.video-wrap{position:relative;width:100%;}
.video-wrap::before{content:"";display:block;padding-top:56.25%;}
.video-wrap video,.video-wrap iframe{position:absolute;inset:0;width:100%;height:100%;border:none;}
.placeholder{display:grid;place-items:center;color:#888;padding:24px;}
input[type=file]{display:none;}
</style>
</head>
<body>
<div class="card">
  <h1 class="theme-text">ApplwNgoo</h1>
  <div>
    <label class="btn" for="videoInput">Ch·ªçn‚ÄØMP4</label>
    <input id="videoInput" type="file" accept="video/mp4,video/*">
    <input id="linkInput" placeholder="Link‚ÄØYouTube/Spotify" style="padding:10px;width:220px;border-radius:8px;border:none;">
    <button class="btn" id="btnPlayLink">Ph√°t‚ÄØlink</button>
    <label class="btn" for="avatarInput">ƒê·ªïi‚ÄØavatar</label>
    <input id="avatarInput" type="file" accept="image/*">
    <button class="btn" id="expandIsland">M·ªü/thu‚ÄØIsland</button>
    <button class="btn" id="btnPink">M√†u‚ÄØh·ªìng</button>
    <button class="btn" id="btnRainbow">C·∫ßu‚ÄØv·ªìng</button>
    <button class="btn" id="btnRGB">RGB</button>
    <button class="btn" id="btnRandom">Random</button>
    <input type="color" id="colorInput" class="btn" value="#ff62a5">
  </div>
</div>

<div class="iphone">
  <div class="island" id="island">
    <div class="island-compact"><span id="vnClock" class="theme-text">--:--:--</span></div>
    <div class="island-expanded">
      <div class="datetime">
        <div class="theme-text" id="vnClockBig">--:--:--</div>
        <div class="theme-text" id="vnDate">--/--/----</div>
      </div>
      <div class="visualizer" id="visualizer"></div>
    </div>
  </div>

  <div class="iphone__screen">
    <div class="fb-header"><div class="logo-badge">f</div></div>
    <div class="fb-composer">
      <img id="composerAvatar" class="avatar-sm">
      <div class="theme-text fake-input">B·∫°n‚ÄØƒëang‚ÄØnghƒ©‚ÄØg√¨?</div>
    </div>
    <div class="fb-post">
      <div class="post-head">
        <img id="postAvatar" class="avatar-sm">
        <div>
          <div id="fbName" class="theme-text name">ApplwNgoo</div>
          <div class="theme-text time" id="postTime">V·ª´a‚ÄØxong‚ÄØ¬∑‚ÄØüåê</div>
        </div>
      </div>
      <div class="post-media" id="postMedia"><div class="placeholder" id="placeholder">Ch∆∞a‚ÄØc√≥‚ÄØn·ªôi‚ÄØdung‚ÄØvideo‚ÄØho·∫∑c‚ÄØnh·∫°c</div></div>
    </div>
  </div>
</div>

<script>
function vnNow(){try{return new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"}))}catch{const n=new Date();return new Date(n.getTime()+n.getTimezoneOffset()*60000+7*3600000)}}
function two(n){return String(n).padStart(2,"0")}
function updateVN(){const n=vnNow();const h=two(n.getHours()),m=two(n.getMinutes()),s=two(n.getSeconds()),d=two(n.getDate()),mo=two(n.getMonth()+1),y=n.getFullYear();vnClock.textContent=h+":"+m+":"+s;vnClockBig.textContent=h+":"+m+":"+s;vnDate.textContent=d+"/"+mo+"/"+y;postTime.textContent="V·ª´a‚ÄØxong‚ÄØ¬∑‚ÄØüåê‚ÄØ"+d+"/"+mo+"/"+y+"‚ÄØ"+h+":"+m;}
setInterval(updateVN,1000);updateVN();
island.onclick=()=>island.classList.toggle("expanded");
expandIsland.onclick=()=>island.classList.toggle("expanded");

function makeAvatar(init){const svg=`<svg xmlns='http://www.w3.org/2000/svg' width='256' height='256'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='#ff62a5'/><stop offset='100%' stop-color='#57ff9a'/></linearGradient></defs><rect width='100%' height='100%' fill='url(#g)'/><text x='50%' y='58%' text-anchor='middle' font-size='110' font-family='Arial' fill='white' font-weight='700'>${init}</text></svg>`;return "data:image/svg+xml;utf8,"+encodeURIComponent(svg);}
const initials="BPN",def=makeAvatar(initials);composerAvatar.src=def;postAvatar.src=def;
avatarInput.onchange=e=>{const f=e.target.files[0];if(!f)return;const url=URL.createObjectURL(f);composerAvatar.src=url;postAvatar.src=url;}

videoInput.onchange=e=>{const f=e.target.files[0];if(!f)return;const url=URL.createObjectURL(f);showVideo(url);}
btnPlayLink.onclick=()=>{const link=linkInput.value.trim();if(!link)return;showEmbed(link);}
function clearMedia(){postMedia.innerHTML="";}
function showVideo(url){clearMedia();const wrap=document.createElement("div");wrap.className="video-wrap";const v=document.createElement("video");v.src=url;v.controls=true;v.autoplay=true;v.loop=true;v.playsInline=true;wrap.appendChild(v);postMedia.appendChild(wrap);startVisualizer(v);}
function showEmbed(url){clearMedia();let embed="";if(url.includes("youtube.com")||url.includes("youtu.be")){const id=url.split("v=")[1]?.split("&")[0]||url.split("youtu.be/")[1];embed=`https://www.youtube.com/embed/${id}?autoplay=1&mute=0`;}else if(url.includes("spotify.com")){embed=url.replace("/track/","/embed/track/");}const wrap=document.createElement("div");wrap.className="video-wrap";const ifr=document.createElement("iframe");ifr.src=embed;postMedia.appendChild(wrap);wrap.appendChild(ifr);}

function randomGradient(){const h1=Math.random()*360,h2=(h1+90)%360;return[`hsl(${h1},90%,65%)`,`hsl(${h2},90%,60%)`];}
function setGradient(a,b){document.documentElement.style.setProperty('--grad1',a);document.documentElement.style.setProperty('--grad2',b);}

// === Full text color control ===
const allTextEls=()=>[...document.querySelectorAll("body *:not(video):not(iframe):not(img)")].filter(e=>e.textContent.trim()!=="");
function applyClass(cls){allTextEls().forEach(el=>{el.classList.remove('rainbow-text','rgb-text','theme-text');el.classList.add(cls);});}
btnPink.onclick=()=>{setGradient("#ff62a5","#ffb3d1");applyClass('theme-text');};
btnRainbow.onclick=()=>applyClass('rainbow-text');
btnRGB.onclick=()=>applyClass('rgb-text');
btnRandom.onclick=()=>{const [a,b]=randomGradient();setGradient(a,b);applyClass('theme-text');};
colorInput.oninput=e=>{setGradient(e.target.value,'#fff');applyClass('theme-text');};

// Visualizer with color sync
let rgbMode=false;
function startVisualizer(media){
  const vsl=document.getElementById("visualizer");vsl.innerHTML="";for(let i=0;i<24;i++){const b=document.createElement("div");vsl.appendChild(b);}const bars=[...vsl.children];
  const ctx=new (window.AudioContext||window.webkitAudioContext)();const src=ctx.createMediaElementSource(media);
  const an=ctx.createAnalyser();an.fftSize=64;src.connect(an);an.connect(ctx.destination);
  const buf=new Uint8Array(an.frequencyBinCount);
  function loop(){
    requestAnimationFrame(loop);
    an.getByteFrequencyData(buf);
    for(let i=0;i<bars.length;i++){
      const h=buf[i]/3;bars[i].style.height=Math.max(4,h)+"px";
      const g1=getComputedStyle(document.documentElement).getPropertyValue('--grad1');
      const g2=getComputedStyle(document.documentElement).getPropertyValue('--grad2');
      bars[i].style.background=`linear-gradient(180deg,${g2},${g1})`;
    }
  }loop();
}
</script>
</body>
</html>


